<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="jquery-3.6.0.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"
    integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT"
    crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/loading.css">
  <title>OnlyRingCake-메뉴</title>
  <style>
    #nav {
      background-color: white;
    }
    #coffee,#noncoffee,#beverage,#food,#cake {
      height: 100px;
      width: 75%;
      text-align: center;
      padding: 10px auto;
      font-size: 20pt;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    .menu_img {
      width: 250px;
      height: 375px;
      border-radius: 5%;
    }
    li {
      display: inline-block;
    }
    #floatdiv {
      position: fixed;
      width: 175px;
      display: inline-block;
      right: 0px;
      top: 35%;
      margin: 0;
      color: rgb(32, 26, 71);
      font-size: small;
    }
    #logo {
      border-radius: 50%;
      animation-name: rotate;
      animation-duration: 200s;
      animation-iteration-count: infinite;
    }
    a:link {color: rgb(32, 26, 71);}
    a:visited {color: rgb(32, 26, 71);}
    a { text-decoration: none;}

    @keyframes rotate {
      0% {transform: rotate(0deg);}
      100% { transform: rotate(36000deg);}
    }
    dd {
      font: Sans-Serif;
      font-size: medium;
      font-weight: bold;
      margin: 0;
    }
    li { margin: 0;}

    #weatherDiv {
      position: fixed;
      width: 180px;
      height: 250px;
      top: 30%;
      left: 0;
      padding: auto;
      text-align: center;
      background-image: url('img/banner_back.png');
      font-size: small;
      font-weight: bold;
      color: white;
      border-radius: 10%;
    }

    #weatherDiv::before {
      content: "";
      opacity: 0.1;
      position: absolute;
      top: 0px;
      left: 0px;
      right: 0px;
      bottom: 0px;
      background-color: rgb(255, 249, 249);
      border-radius: 10%;
    }
  </style>
</head>
<body class="text-center" onload="geoFindMe()">
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid" id="nav">
      <a class="navbar-brand" href="main.html"><img src="img/onlyringcake1.jpg" alt="OnlyRingCake" width="150px"></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-between" id="navbarNavDropdown">
        <ul class="navbar-nav mr-auto nav-tabs">
          <li class="nav-item">
            <a class="nav-link " href="main.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="info.html">INFO</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="order.html">ORDER</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">MENU</a>
          </li>
        </ul>
        <div class="cssload-box-loading" style="opacity: 0.3;"></div>
        <a href="main.html"><img src="img/onlyringlogo.jpg" alt="" width="500px"></a>
        <ul class="navbar-nav nav justify-content-end bg-right">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
              data-bs-toggle="dropdown" aria-expanded="false">
              <span id="user_name"></span>
            </a>
            <ul class="dropdown-menu" id="logintoggle" role="menu" aria-labelledby="navbarDropdownMenuLink">
              <li><a class="dropdown-item" role="menuitem" href="mypage.html">My Page</a></li>
              <li><a class="dropdown-item" role="menuitem" href="orderpage.html">주문내역<span class="badge">1</span></a>
              </li>
            </ul>
          </li>
          <li class="nav-item"><a class="nav-link" href="login.html" id="login">로그인</a></li>
          <li class="nav-item"><a class="nav-link" href="login.html" id="logout" onclick="logout_btn()">로그아웃</a></li>
          <li class="nav-item"><a class="nav-link" href="signup.html">회원가입</a></li>
          <li class="nav-item"><a class="nav-link" href="https://www.instagram.com/only_ring_cake/?hl=ko"
              target="_blank"><img src="img/instagram.png" alt="" width="30px"></a></li>
          <li class="nav-item"><a class="nav-link" href="https://blog.naver.com/onlyring1" target="_blank"><img
                src="img/naverblog.png" alt="" width="30px"></a></li>
          <li class="nav-item"> <button type="button" data-toggle="popover" title="070-8816-0076"
              style="border: none; background-color: white;"><img src="img/phone.png" alt="" width="30px"
                style="border-radius: 40%;"></button></li>
        </ul>
      </div>
    </div>
  </nav>
  <main>
    <div id="container">
      <div id="weatherDiv"></div>
      <div id="floatdiv"><a href="#"><img src="img/onlyring.jpg" alt="" width="100px" id="logo">
          <ul class="list-unstyled mb-0 py-3 pt-md-1 ">
            <li><a class="nav-link " href="#cake">&nbsp;&nbsp;&nbsp;cake&nbsp;&nbsp;&nbsp;</a></li>
            <li><a class="nav-link" href="#coffee"> &nbsp; &nbsp; &nbsp; coffee &nbsp;  &nbsp; &nbsp;</a></li>
            <li><a class="nav-link" href="#noncoffee"> &nbsp; non coffee &nbsp; </a></li>
            <li><a class="nav-link " href="#beverage">&nbsp; &nbsp;beverage&nbsp;&nbsp;</a></li>
            <li><a class="nav-link " href="#food">&nbsp;&nbsp;food&nbsp;&nbsp;</a></li>
          </ul>
          </nav>
        </a></div>
      <dl>
        <br><br>
        <dt style="font-size:  20pt; display: block;size: 800px;" id="cake"><a href="#cake"
            style="color: #111122; margin-top: auto;">cake</a></dt>
        <dd>
          <ul>
            <li>
              <dl>
                <dt>
                  <img src="img/bottlecake.jpg" alt="bottlecake" class="menu_img">
                </dt>
                <dd>보틀 케이크</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/dosirakcake.jpg" alt="도시락케이크" class="menu_img">
                </dt>
                <dd>도시락 케이크</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/minicake.jpg" alt="mini" class="menu_img">
                </dt>
                <dd>미니 케이크</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/cake.jpg" alt="cake" class="menu_img">
                </dt>
                <dd>케이크</dd>
              </dl>
            </li>
          </ul>
        </dd>
        <dt style="font-size:  20pt; display: block;  size: 800px;" id="coffee"><a href="#coffee"
            style="color: #111122; ">Coffee</a></dt>
        <dd>
          <ul>
            <li>
              <dl>
                <dt>
                  <img src="img/ice_americano.jpg" alt="ice_americano" class="menu_img">
                </dt>
                <dd>ICE 아메리카노</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/hot_americano.jpg" alt="hot_americano" class="menu_img">
                </dt>
                <dd>HOT 아메리카노</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/ice_latte.jpg" alt="ice_latte" class="menu_img">
                </dt>
                <dd>ICE 라떼</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/hot_latte.jpg" alt="hot_latte" class="menu_img">
                </dt>
                <dd>HOT 라떼</dd>
              </dl>
            </li>
          </ul>
        </dd>
        <dt style="font-size:  20pt; display: block; size: 800px;" id="noncoffee"><a href="#noncoffee"
            style="color: #111122; ">Non Coffee</a></dt>
        <dd>
          <ul>
            <li>
              <dl>
                <dt>
                  <img src="img/ice_greentea.jpg" alt="ice_greentea" class="menu_img">
                </dt>
                <dd>ICE 녹차라떼</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/hot_greentea.jpg" alt="hot_greentea" class="menu_img">
                </dt>
                <dd>HOT 녹차라떼</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/ice_chocolate.jpg" alt="ice_chocolate" class="menu_img">
                </dt>
                <dd>ICE 초코</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/hot_chocolate.jpg" alt="hot_chocolate" class="menu_img">
                </dt>
                <dd>HOT 초코</dd>
              </dl>
            </li>
          </ul>
        </dd>
        <dt style="font-size:  20pt; display: block; size: 800px;" id="beverage"><a href="#beverage"
            style="color: #111122; ">beverage</a></dt>
        <dd>
          <ul>
            <li>
              <dl>
                <dt>
                  <img src="img/ice_orange.jpg" alt="ice_orange" class="menu_img">
                </dt>
                <dd>ICE 귤에이드</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/mo.jpg" alt="mojito" class="menu_img">
                </dt>
                <dd>모히토</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/strawberry.jpg" alt="strawberry" class="menu_img">
                </dt>
                <dd>ICE 요거트딸기스무디</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/ruibostea.jpg" alt="Rooibos" class="menu_img">
                </dt>
                <dd>루이보스 티</dd>
              </dl>
            </li>
          </ul>
        </dd>
        <dt style="font-size:  20pt; display: block;  size: 800px;" id="food"><a href="#food"
            style="color: #111122; margin-top: auto;">food</a></dt>
        <dd>
          <ul>
            <li>
              <dl>
                <dt>
                  <img src="img/scone.jpg" alt="scone" class="menu_img">
                </dt>
                <dd>스콘</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/muffin.jpg" alt="muffin" class="menu_img">
                </dt>
                <dd>머핀</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/smore_lotus.jpg" alt="smore_lotus" class="menu_img">
                </dt>
                <dd>스모어쿠키</dd>
              </dl>
            </li>
            <li>
              <dl>
                <dt>
                  <img src="img/egg.jpg" alt="egg" class="menu_img">
                </dt>
                <dd>에그타르트</dd>
              </dl>
            </li>
          </ul>
        </dd>

      </dl>
    </div>
  </main>

  <script>
    
    function setCookie(name, value, expireDate) {
      var cookieStr = name + "=" + escape(value) + ((expireDate == null) ? "" : ("; expires= " + expireDate.toGMTString()));
      document.cookie = cookieStr;
    }
    function getCookie(name) {
      var str = name + "=";
      var pairs = document.cookie.split(";");
      for (var i = 0; i < pairs.length; i++) {
        var pair = pairs[i].trim();
        var unit = pair.split("=");
        if (unit[0] == name)
          return unescape(unit[1]);
      }
      return null;
    }
    var username = getCookie("username");
    if (localStorage.getItem(username) != null) { // 로그인 되었을때 
      var userName = document.getElementById('user_name');
      userName.innerHTML = JSON.parse(localStorage.getItem(username)).name + "님";
      document.getElementById("login").style.display = 'none';
      document.getElementById('logout').style.display = 'inline';
    } else {
      document.getElementById("navbarDropdownMenuLink").style.display = 'none';
      document.getElementById('logout').style.display = 'none';
    }
    $(function () {
      $('[data-toggle="popover"]').popover()
    });
    function logout_btn() {
      document.cookie = "username =; expires ="
    };

    // 경도, 위도 찾고 날씨 받아오기 
    function geoFindMe() {

      function success(position) {
        const latitude = position.coords.latitude; // 경도
        const longitude = position.coords.longitude;	// 위도
        // 위치 날씨 
        getWeather(latitude, longitude);
      }

      function error() {
        weatherDiv.innerHTML = '<p>위치정보를 찾을 수 없습니다.</p>';
      }

      if (!navigator.geolocation) {
        weatherDiv.innerHTML = '<p>위치정보를 찾을 수 없습니다.</p>';
      } else {
        navigator.geolocation.getCurrentPosition(success, error);
      }

    }
    var weatherDiv = document.getElementById('weatherDiv');
    // 날씨 받아오기
    function getWeather(lat, lon) {
      var weatherIcon = document.createElement('img');
      var str = '';
      var numD = Math.floor(Math.random() * 7);
      var numF = Math.floor(Math.random() * 7);
      var hot = ['아메리카노', '라떼', '녹차라떼', '초코', '루이보스', '로즈마리', '카모마일'];
      var ice = ['아메리카노', '라떼', '녹차라떼', '초코', '귤에이드', '모히토', '딸기 요거트 스무디'];
      var food = ['스콘', '머핀', '녹차 스모어 쿠키', '에그타르트', '보틀 케이크', '로투스 스모어 쿠키', '크림치즈 쿠키'];

      fetch('https://api.openweathermap.org/data/2.5/weather?lat=' + lat + '&lon=' + lon + '&lang=kr&appid=604cdb5234582ce65e1555fd5df35291&units=metric')
        .then(res => res.json())
        .then(data => {
          console.log(data);
          const temp = data.main.temp;
          const weathers = data.weather[0];
          weatherIcon.src = 'http://openweathermap.org/img/wn/' + weathers.icon + '@2x.png';
          str = '<br><p>' + temp + '&#176;C  <br> ' + weathers.description + '<br><br>';
          if (temp < 19) {
            str += food[numF] + '에 <br>';
            str += '따뜻한 ' + hot[numD] + ' 어떠세요?</p>';
          } else if (temp >= 19 && temp <= 22) {
            if (weathers.id / 100 >= 2 && weathers.id / 100 <= 6) {
              str += food[numF] + '에 <br>';
              str += '따뜻한 ' + hot[numD] + ' 어떠세요?</p>'
            } else {
              str += '맛있는 ' + food[numF] + '에 <br>';
              str += '시원한 ' + ice[numD] + ' 어떠세요?</p>'
            }
          } else {
            str += food[numF] + '에 <br>';
            str += '시원한' + ice[numD] + ' 어떠세요?</p>'
          }
          weatherDiv.innerHTML = str; // 메뉴추천, 날씨 입력
          weatherDiv.appendChild(weatherIcon);  // 날씨 아이콘
        })
    }
  </script>
</body>

</html>