<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="jquery-3.6.0.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"
    integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="css/signup.css">
  <link rel="stylesheet" href="css/loading.css">
  <style>
    /* #id, #tel,#email,#pass,#passCheck,#username,#birth,#gender ,#buttons{
      height: calc(3.5rem + 2px);
      padding: 1rem .75rem;
      width: 60%;
    } */
    .form-floating>input,
    #buttons,
    #gender {
      height: calc(3.5rem + 2px);
      padding: 1rem .75rem;
      width: 100%;
    }

    #nav {
      background-color: white;
    }

    .form-wrap {
      width: 100%;
      position: relative;
      margin: 6% auto;
      background: #fff;
      padding: 5px;
      overflow: hidden;
    }

    #floatdiv {
      position: fixed;
      width: 175px;
      display: inline-block;
      right: 0px;
      top: 35%;
      margin: 0;
      color: darkslateblue;
      font-size: small;
    }

    #logo {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      animation-name: rotate;
      animation-duration: 32s;
      animation-iteration-count: infinite;
    }

    @keyframes rotate {
      to{transform: rotate(0deg);}
      from{transform: rotate(7200deg);}
    }
  </style>
  <title>회원가입</title>
</head>

<body class="text-center">
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid" id="nav">
      <a class="navbar-brand" href="main.html"><img src="img/onlyringcake1.jpg" alt="OnlyRingCake" width="150px"></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-between" id="navbarNavDropdown">
        <ul class="navbar-nav mr-auto nav-tabs">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="main.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="info.html">INFO</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="order.html">ORDER</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="menu.html">MENU</a>
          </li>
        </ul>
        <div class="cssload-box-loading" style="opacity: 0.3;"></div>
        <a href="main.html"><img src="img/onlyringlogo.jpg" alt="" width="500px"></a>
        <ul class="navbar-nav nav justify-content-end bg-right">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
              data-bs-toggle="dropdown" aria-expanded="false">
              님
            </a>
            <ul class="dropdown-menu" id="logintoggle" role="menu" aria-labelledby="navbarDropdownMenuLink">
              <li><a class="dropdown-item" role="menuitem" href="#">My Page</a></li>
              <li><a class="dropdown-item" role="menuitem" href="#">주문내역<span class="badge">1</span></a></li>
            </ul>
          </li>
          <li class="nav-item"><a class="nav-link" href="login.html">로그인</a></li>
          <li class="nav-item"><a class="nav-link" href="login.html" id="logout" style="display: none;"
              onclick="logout_btn()">로그아웃</a></li>
          <li class="nav-item"><a class="nav-link" href="signup.html">회원가입</a></li>
          <li class="nav-item"><a class="nav-link" href="https://www.instagram.com/only_ring_cake/?hl=ko"
              target="_blank"><img src="img/instagram.png" alt="" width="30px"></a></li>
          <li class="nav-item"><a class="nav-link" href="https://blog.naver.com/onlyring1" target="_blank"><img
                src="img/naverblog.png" alt="" width="30px"></a></li>
          <li class="nav-item"> <button type="button" data-toggle="popover" title="070-8816-0076"
              style="border: none; background-color: white; width: 30px;"><img src="img/phone.png" alt="" width="30px"
                style="border-radius: 40%;"></button></li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="container-fluid form-wrap">
    <div id="floatdiv"><img id="logo" src="img/onlyring.jpg" alt="" width="100px"></div>
    <div class="container center-block content-center">
      <center>
        <h2 class="h2 mb-3 fw-normal">회원 가입</h2>
        <form class="container-sm " name="signup">
          <div class="content-center w-50" style="text-align: center;">
            <div class="form-floating">
              <input type="text" name="userid" class="form-control" id="id" placeholder="ID " required autofocus>
              <label for="id">ID</label>
              <input type="text" name="useridstatus" id="userid" style="border:0;color:red;font-size:8px 굴림;width:160"
                readonly onfocus="this.blur();" value="[ 4~15자리 영문과 숫자로 입력하세요 ]">
            </div>
            <div class="form-floating">
              <input type="password" class="input-form" name="pass" id="pass" onblur=checkvalue();
                placeholder="Password" required>
            </div>
            <div class="form-floating">
              <input type="password" class="input-form" name="passCheck" id="passCheck" onblur=checkvalue();
                placeholder="비밀번호 재확인" required>
              <input type="text" name="status" style="border:0;color:red;font-size:8px 굴림;width:160" readonly
                onfocus="this.blur();" value="[ 비밀번호를 입력해 주세요.영문,숫자 모두 포함하여 8자리 이상입니다. ]">
            </div>
            <div class="form-floating">
              <input type="text" class="input-form" name="username" id="username" placeholder="이름" required>
            </div>
            <div class="form-floating">
              <input type="date" class="input-form" name="birth" id="birth" placeholder="Birth">
            </div>
            <div class="form-floating">
              <select name="gender" id="gender" class="input-form">
                <option value selected>성별</option>
                <option value="M">남자</option>
                <option value="F">여자</option>
                <option value="U">선택 안함</option>
              </select>
            </div>
            <div class="form-floating">
              <input type="email" class="input-form" name="email" id="email" placeholder="name@domin.com">
            </div>
            <div class="form-floating">
              <input type="tel" class="input-form" name="tel" id="tel" pattern="(010)-\d{3,4}-\d{4}" placeholder="전화번호"
                required>
            </div>
            <div>
              <ul id="buttons">
                <li>
                  <button type="button" onclick="checkInfo()">가입하기</button>
                </li>
              </ul>
            </div>
          </div>
        </form>
      </center>
    </div>
</body>
<script>
  // 달력 세팅 
  var regTypeId = /^[0-9A-Za-z+]{4,15}$/;
  var regTypePw = /^(?=.*?[a-zA-Z])(?=.*?[0-9]).{8,}$/;
  var regTypePwC = /^(?=.*?[a-zA-Z])(?=.*?[0-9]).{8,}$/;
  var regTypeTel = /^[0-9]{11}/;
  var userId = document.getElementById('id');
  var userPw = document.getElementById('pass');
  var userPwc = document.getElementById('passCheck');
  var userName = document.getElementById('username');
  var userBirth = document.getElementById('birth');
  var userGender = document.getElementById('gender');
  var userEmail = document.getElementById('email');
  var userTel = document.getElementById('tel');
  var val = localStorage.getItem(userId.value);
  function checkInfo() {

    if (!regTypeId.test(userId.value)) {
      alert("아이디는 4~15자리의 영문과 숫자로 입력하세요.");
      userId.value = null;
      userId.focus();
    } else if (val != null) {
      alert("중복된 아이디 입니다.")
      userId.value = null;
      userId.focus();
    } else if (!regTypePw.test(userPw.value)) {
      alert("비밀번호는 영문,숫자 모두 포함하여 8자리 이상입니다.");
      userPw.value = null;
      userPw.focus();
    }
    else if (userPw.value != userPwc.value) {
      alert("비밀번호가 맞지 않습니다.");
      userPwc.focus();
    } else if (userName.value == null) {
      alert("이름은 필수사항입니다.")
    } else if (!regTypeTel.test(userTel.value)) {
      alert("전화번호 입력을 다시 해주세요.")
    } else {
      if (!window.localStorage) {
        alert("세션 스토리지를 지원하지 않습니다.")
        return;
      }
      // 배열 형식으로 정보 저장하기 
      var userinfo = { "id": userId.value, "password": userPw.value, "name": userName.value, "birth": userBirth.value, "gender": userGender.value, "email": userEmail.value, "tel": userTel.value, "Mileage": '0' };
      localStorage.setItem(userId.value, JSON.stringify(userinfo));
      alert("가입되었습니다!!")
      location.href = 'login.html';
    }
  }
  // checkvalue 기능
  function checkvalue() {

    // a 텍스트 필드와 b 텍스트 필드 중 둘다 값이 있을 때
    if (signup.pass.value && signup.passCheck.value) {

      // 두 필드의 값이 서로 다를 때
      if (signup.pass.value != signup.passCheck.value) {

        // status 필드에 일치하지 않는다는 문장 출력 & 색깔 바꾸기 
        signup.status.value = "[ 일치하지 않습니다 ]";
        signup.status.style.color = 'red';
        // 그에 맞게 길이 수정
        signup.status.style.width = 120;

        // 두 필드의 값이 동일 할 때
      } else {

        // status 필드에 일치한다는 문장 출력
        signup.status.value = "[ 일치합니다 ]";

        // 역시 그에 맞게 길이 수정
        signup.status.style.width = 83;
      }

      // a 텍스트 필드와 b 텍스트 필드 두중하나라도 값이 없을 때
    } else {

      // 아무것도 입력이 안 되어 있으므로 비밀번호를 입력해 달라는 메세지를 status 필드에 출력 함
      signup.status.value = "[ 비밀번호를 입력해 주세요. ]";
      signup.status.style.color = 'red';
      // 그에 맞게 길이 수정
      signup.status.style.width = 160;
    }
  }
  // id 입력 check
  function checkId() {
    if (signup.userid) {
      if (regTypeId.test(userId.value)) {
        if (val != null) {
          signup.useridstatus.value = "[중복된 아이디 입니다.]";
        }
        signup.useridstatus.value = "[사용가능한 아이디 입니다.]";
      }
    }
  }

</script>

</html>